<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
    crossorigin="anonymous"
  />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"
  ></script>
  <link rel="stylesheet" href="wts.css" />
  <link rel="icon" type="image/x-icon" href="Logo_last.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Playwrite+MX:wght@100..400&display=swap"
    rel="stylesheet"
  />
  <title>Activity_2</title>
  <style>
 
    .option {
      display: block;
      width: 95%;
      margin: 3% 0%;
      padding: 7px;
      cursor: pointer;
      background-color: #f56c6c;
      color: black;
      border: none;
      border-radius: 5px;
      font-size: 1.5vw;
      font-weight: 500;
      transition: background-color 0.3s;
    }
    .option:hover {
      background-color: #0056b3;
    }
    .imgdiv {
      position: relative;
    }
    .question {
     position: absolute;
  top: 60%; /* Move to 50% from the top of imgdiv */
  left: 50%; /* Move to 50% from the left of imgdiv */
  transform: translate(-50%, -50%); 
  width: 70%; /* Adjust width as needed */
 
  color: black; /* Example text color */
  font-size: 1.5rem; /* Example font size */
  text-align: center; /* Example text alignment */
  border-radius: 5px; /* Example border radius */
    
    }
 .smallbtn.active,
.smallbtn.default {
  background-color: #f56c6c; /* Red color example */
  color: #ffffff; /* White text color */
}
  </style>
</head>
<body>
  <audio id="cheers">
    <source src="cheers.mp3" type="audio/mpeg" />
  </audio>
  <audio id="point-sound" src="points.mp3"></audio>
  <audio id="fail" src="fail.mp3"></audio>
  <div
    class="header"
    style="
      width: auto;
      box-shadow: 5px 5px 10px rgb(0, 0, 0);
      padding-bottom: 10px;
    "
  >
    <img
      src="Logo.png"
      width="5%"
      style="float: left; margin-top: 25px; text-align: left"
      class="img-responsive"
    />
    <span>
      <img
        src="header.png"
        width="30%"
        height=""
        class="img-responsive"
        style="text-align: left"
      />
    </span>
  </div>
  <br />
  <center>
    <h1 id="heading">Reading Comprehension Literary Devices-I</h1>
    <div id="questionButtons" class="container">
      <!-- Dynamic buttons will be inserted here -->
    </div>
    <br>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#storyModal">
      Click here to read the story
    </button>
        <div class="maindiv container d-flex">
      <div
        class="col-lg-1 col-md-1 col-sm-1 col-xs-1"
        style="
          font-size: 25px;
          color: black;
          font-family: Georgia;
        "
      >
        <p id="numdiv"></p>
      </div>
      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 imgdiv">
        <div id="question" class="question"></div> 
        <img
          id="math_ques"
        src="question_img.png"
          width="100%"
          height="100%"
        />
      </div>
      
      <div
        id="questiondiv"
        class="col-lg-5 col-md-5 col-sm-5 col-xs-5"
      >
        <div class="options" id="options">
          <!-- Options will be dynamically inserted here -->
        </div>
      </div>
    </div>
    <div class="container d-flex mt-4 mb-2">
      <div
        class="btnContainer col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-2"
      >
        <button
          id="nextbtn"
          class="btn btn-lg btn-primary"
          onclick="newques()"
        >
          Next
        </button>
      </div>
      <div
        class="messageContainer col-lg-6 col-md-6 col-sm-6 col-xs-6 mt-2"
      >
        <p id="message" class="message"></p>
      </div>
    </div>

    <script>
      let questions; // Variable to hold loaded questions data
      let currentQuestion = 0;
      let currentImage = 0;

      // Function to fetch questions from JSON file
      async function fetchQuestions() {
        try {
          const response = await fetch('questions.json'); // Fetch the JSON file
          if (!response.ok) {
            throw new Error('Failed to load questions');
          }
          questions = await response.json(); // Parse JSON response
        } catch (error) {
          console.error('Error loading questions:', error);
        }
      }

      // Function to load question into UI
      function loadQuestion() {
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const messageElement = document.getElementById('message');
        const questionNumber = document.getElementById('numdiv');
        const questionImage = document.getElementById('math_ques');

        const current = questions[currentQuestion];

        questionNumber.innerHTML = current.questionNo;
        questionElement.innerHTML = current.question;

        // Clear previous options
        optionsElement.innerHTML = '';

        // Dynamically generate options
        current.options.forEach((option, index) => {
          const button = document.createElement('button');
          button.classList.add('btn', 'option');
          button.id = 'option' + index;
          button.textContent = option;
          button.onclick = () => checkAnswer(index);
          optionsElement.appendChild(button);
        });

        messageElement.innerHTML = '';
        document.getElementById('nextbtn').style.display = 'none';
      }

      // Function to check selected answer
      function checkAnswer(selected) {
        const current = questions[currentQuestion];
        const messageElement = document.getElementById('message');
        const failSound = document.getElementById('fail');

        if (selected === current.correct) {
          messageElement.innerHTML = 'Good job! &#128512';
          document.getElementById('point-sound').play();
          document.getElementById('nextbtn').style.display =
            'inline-block';
        } else {
          messageElement.innerHTML = 'Try Again ðŸ˜Ž!';
          // document.getElementById('fail').play();
          failSound.currentTime = 0;
          failSound.play();
          document.getElementById('nextbtn').style.display = 'none';
        }
      }

      // Function to load next question
      function newques() {
        if (currentQuestion === questions.length - 1) {
          document.getElementById('heading').innerHTML = '';
          document.getElementById('math_ques').src = "last.png";
          document.getElementById('question').innerHTML = '';
          document.getElementById('options').innerHTML = "";
          document.getElementById('cheers').play();
          document.getElementById('message').innerHTML = '';
          document.getElementById('nextbtn').style.display = 'none';
          document.getElementById('numdiv').style.display = 'none';
          const buttons = document.querySelectorAll('.smallbtn');
          buttons.forEach(button => button.classList.remove('active'));
          
        } else {
          currentQuestion++;
          currentImage++;
          loadQuestion();

          // Update active class in question selection buttons
    const buttons = document.querySelectorAll('.smallbtn');
    buttons.forEach((button, index) => {
      if (index === currentQuestion) {
        button.classList.add('active');
      } else {
        button.classList.remove('active');
      }
    });
        }
      }

      // Function to handle button clicks for specific question
   // Function to handle button clicks for specific question
function abc(x) {
 document.getElementById('numdiv').style.display='block';
 document.getElementById('heading').innerHTML='Reading Comprehension Literary Devices-I';
 document.getElementById('math_ques').src='question_img.png'
  currentQuestion = x - 1;
  currentImage = x - 1;
  loadQuestion();

  // Remove active class from all buttons
  const buttons = document.querySelectorAll('.smallbtn');
  buttons.forEach(button => button.classList.remove('active'));

  // Add active class to the clicked button
  buttons[x - 1].classList.add('active');
}

      // Initialize the quiz when window loads
   // Initialize the quiz when window loads
window.onload = async function () {
  await fetchQuestions(); // Load questions from JSON
  loadQuestion(); // Display the first question

  // Generate question selection buttons dynamically
  const questionButtonsContainer = document.getElementById('questionButtons');
  questions.forEach((_, index) => {
    const button = document.createElement('button');
    button.textContent = `Q${index + 1}`;
    button.classList.add('smallbtn');
    button.onclick = () => abc(index + 1);

    // Add 'active' class to the first button
    if (index === 0) {
      button.classList.add('active');
    }

    questionButtonsContainer.appendChild(button);
  });
};

    </script>
  </center>
  <!-- Modal -->
<div class="modal fade" id="storyModal" tabindex="-1" aria-labelledby="storyModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 70%;font-size: 1.2rem; ">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="storyModalLabel">The Keeper's Burden - I        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Story content goes here -->
        <p>The ancient forest of Avalon whispered of times when Arthur drew Excalibur and when Hercules laboured under the weight of the world. The trees stood like silent witnesses, their roots entwined in legends as old as Gilgamesh, while the distant call of a siren echoed faintly over the dark waters of a nearby lake. At the centre of this timeless grove, a young keeper named Rowan held a relic said to be forged by Hephaestus himself, unsure whether it was a blessing or a curse.</p>

        <p>Rowan had journeyed far, through storms as fierce as dragons and winds strong enough to tear trees from the ground. His limbs ached as though they had been weighed down by stones, and his vision blurred from exhaustion. "I would climb the highest peak to fulfil my duty," he muttered, despite knowing the impossibility of such a task.</p>
      
        <p>A sudden snap of a twig broke the quiet, and Rowan spun around, his heart thumping in his chest like a drumbeat. The rustle of leaves followed, carried by a chill breeze that made him shiver. Another crack echoed through the forest, each sound amplifying his sense of dread.</p>
      
        <p>The moon hung low in the sky, casting its pale light over the leaves, which shimmered like silver coins scattered across the ground. Rowan moved cautiously, his footsteps as soft as a whisper, trying not to disturb the stillness of the night. He carried the relic close, cradling it gently as though it were a newborn lamb.</p>      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
